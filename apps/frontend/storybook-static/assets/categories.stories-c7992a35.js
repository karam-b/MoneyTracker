import{u as T,O as F}from"./OneOpenAtATime-fee01c77.js";import{u as p,a as Q,b as E,d as D,c as R,s as B}from"./index-07b47e9e.js";import{j as e,r as N,R as O}from"./emotion-react.browser.esm-6f7d9f87.js";import{u as g,S as h,H as P,T as s,a as k,F as w,e as V,c as q,b as I}from"./msw-8d4b77cc.js";import"./_commonjsHelpers-042e6b4d.js";import"./keysIn-c2d346de.js";import"./identity-7e60cc5e.js";import"./isPlainObject-70fa569c.js";function u({category:t}){const a=p(),r=g({mutationFn:Q,onSettled:()=>{a.invalidateQueries(["find_category"])}});return e(w,{onSuccess:(n,o)=>{o.setValues(t,!1),o.setStatus({success:"updated"})},initial:t,action:r},e("div",{css:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"0.75rem"}},e(h,{css:{gridColumn:"span 2 / span 2"}}),e(P,{name:"_id"}),e(s,{name:"title"}),e(s,{name:"color"}),e(s,{name:"note"}),e(s,{name:"icon"}),e(k,{css:{gridColumn:"span 2 / span 2",marginTop:"0.5rem"},size:"lg"},"submit"))," ")}try{u.displayName="EditCategory",u.__docgenInfo={description:"",displayName:"EditCategory",props:{category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"UtilsDocument & { createdBy: string; title: string; color?: string | undefined; icon?: string | undefined; }"}}}}}catch{}function m({category:t}){const[a,r]=T(),[n,o]=N.useState(!1),y=E("find_one_category",[{_id:t._id}]),i=y.status==="success"?y.data:t,_=p(),d=g({mutationFn:D,onSettled:()=>{_.invalidateQueries(["find_one_category",{_id:t._id}]),_.invalidateQueries(["find_category"])}});return e("div",{css:{borderRadius:"0.375rem",padding:"0.75rem",paddingTop:"0.25rem",paddingBottom:"0.25rem",":hover":{backgroundColor:"rgb(226 232 240 / 0.5)"},":is(.dark &):hover":{backgroundColor:"rgb(71 85 105 / 0.1)"}}},e("div",{css:{"--tw-text-opacity":"1",color:"rgb(79 70 229 / var(--tw-text-opacity))"}},d.status==="loading"&&"deleting",d.status==="success"&&"deleted"),e("div",null,i.title),e("div",null,i.icon||"no icon"),e("div",null,i.color||"no color"),a?e("button",{onClick:()=>r(!1)},"show less"):e("button",{onClick:()=>r(!0)},"expand"),a&&e("div",null,n?e(O.Fragment,null,e("button",{css:{marginRight:"0.75rem"},onClick:()=>o(!1)},"close editing"),e(u,{category:i})):e("button",{css:{marginRight:"0.75rem"},onClick:()=>o(!0)},"click to edit"),e("button",{disabled:d.status!=="idle",css:d.status!=="idle"&&{pointerEvents:"none","--tw-text-opacity":"1",color:"rgb(209 213 219 / var(--tw-text-opacity))"},onClick:()=>d.mutate({_id:i._id})},"click to delete")))}try{m.displayName="CategoryEntry",m.__docgenInfo={description:"",displayName:"CategoryEntry",props:{category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"UtilsDocument & { createdBy: string; title: string; color?: string | undefined; icon?: string | undefined; }"}}}}}catch{}function j(){const t=p(),a=g({mutationFn:R,onSettled:()=>{t.invalidateQueries(["find_category"])}});return e(w,{onSuccess:(r,n)=>{n.setValues({},!1),n.setStatus({success:"created"})},action:a,required:["title"]},e("div",{css:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"0.75rem"}},e(h,{css:{gridColumn:"span 2 / span 2"}}),e(s,{name:"title"}),e(s,{name:"color"}),e(s,{name:"note"}),e(s,{name:"icon"}),e(k,{css:{gridColumn:"span 2 / span 2",marginTop:"0.5rem"},size:"lg"},"submit")))}function z(){B("Categories");const{data:t}=E("find_category",[]);return t?e(F,null,e("div",{css:{"&>*":{marginTop:"1rem"}}},e(j,null),t.reverse().map(a=>e(m,{key:a._id,category:a})))):e("div",null,"error")}const W={component:z,title:"pages/categories"},c={parameters:{msw:{handlers:[...V]}}},l={parameters:{msw:{handlers:[q,I]}}};var f,v,C;c.parameters={...c.parameters,docs:{...(f=c.parameters)==null?void 0:f.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [...empty_data]
    }
  }
} satisfies st<typeof Page>`,...(C=(v=c.parameters)==null?void 0:v.docs)==null?void 0:C.source}}};var b,S,x;l.parameters={...l.parameters,docs:{...(b=l.parameters)==null?void 0:b.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [categories_data, category_data]
    }
  }
} satisfies st<typeof Page>`,...(x=(S=l.parameters)==null?void 0:S.docs)==null?void 0:x.source}}};const X=["EmptyList","Default"];export{l as Default,c as EmptyList,X as __namedExportsOrder,W as default};
//# sourceMappingURL=categories.stories-c7992a35.js.map
