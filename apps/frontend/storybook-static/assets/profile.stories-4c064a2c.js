import{j as s,r as S}from"./emotion-react.browser.esm-6f7d9f87.js";import{e as v,f as h,s as C,b as _}from"./index-07b47e9e.js";import{u,S as d,P as i,a as P,F as p,T as m,d as y,B as n,p as F}from"./msw-8d4b77cc.js";import"./_commonjsHelpers-042e6b4d.js";import"./keysIn-c2d346de.js";import"./identity-7e60cc5e.js";import"./isPlainObject-70fa569c.js";function O(){const t=u({mutationFn:v});return s(p,{onSuccess:(a,e)=>{e.setValues({},!1),e.setStatus({success:"password changed"})},action:t,properties:["newPassword","oldPassword"],required:["newPassword","oldPassword"]},s("div",null,s(d,null),s(i,{name:"oldPassword"}),s(i,{name:"newPassword"}),s(P,{css:{marginTop:"0.5rem"},size:"lg"},"submit")))}function T(){const t=u({mutationFn:v});return s(p,{onSuccess:(a,e)=>{e.setValues({},!1),e.setStatus({success:"password changed"})},action:t,properties:["newPassword"],required:["newPassword"]},s("div",null,s(d,null),s(i,{name:"oldPassword"}),s(P,{css:{marginTop:"0.5rem"},size:"lg"},"submit")))}function l(){return l=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},l.apply(this,arguments)}function j(){const t=u({mutationFn:h});return s(p,{onSuccess:(a,e)=>{e.setValues({},!1),e.setStatus({success:"profile updated"})},action:t,properties:["displayName","picture"]},s("div",null,s(d,null),s(m,{name:"displayName"}),s(m,{name:"picture"}),s(k,{css:{marginTop:"0.5rem"},size:"lg"},"submit")))}function k(t){const{isSubmitting:a,submitForm:e,values:r,setStatus:g}=y();return s(n,l({},t,{disabled:a,variant:"light",asChild:!0}),s("button",{onClick:()=>{if(Object.values(r).filter(b=>b).length===0){g({error:"empty form"});return}e()},type:"button"},"Submit"))}function x(){C("Profile");const{data:t}=_("profile",[]);if(!t)return s("div",null,"error");const[a,e]=S.useState("");return s("div",{css:{"&>*":{marginTop:"1rem"}}},s("h1",null,"Profile"),s("div",null,"Name: ",t.displayName),s("div",null,"Email: ",t.email),s("div",null,"Picture: ",t.picture||"no picture"),s("div",null,"Providers:",["google","local"].map(r=>t.providers.includes(r)&&s("div",{key:r}," ",s("span",null,r))).filter(r=>r)),t.providers.includes("local")?s("div",null,s(n,{asChild:!0},s("button",{onClick:()=>e(r=>r==="password"?"":"password")},"Reset Password")),a==="password"&&s(O,null)):s("div",null,s(n,{asChild:!0},s("button",{onClick:()=>e(r=>r==="password"?"":"password")},"Set Password")),a==="password"&&s(T,null)),s("div",null,s(n,{asChild:!0},s("button",{onClick:()=>e(r=>r==="profile"?"":"profile")},"Update Profile")),a==="profile"&&s(j,null)))}const R={component:x,title:"pages/profile"},o={parameters:{msw:{handlers:[F]}}};var c,f,w;o.parameters={...o.parameters,docs:{...(c=o.parameters)==null?void 0:c.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [profile_data]
    }
  }
} satisfies st<typeof Page>`,...(w=(f=o.parameters)==null?void 0:f.docs)==null?void 0:w.source}}};const U=["Default"];export{o as Default,U as __namedExportsOrder,R as default};
//# sourceMappingURL=profile.stories-4c064a2c.js.map
